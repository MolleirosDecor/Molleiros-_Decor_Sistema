<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Molleiros Decor | Sistema Inicial</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body{font-family:Segoe UI,Arial;background:#fff7fb;padding:20px}
section{background:#fff;padding:20px;border-radius:16px;margin-bottom:20px;box-shadow:0 0 10px rgba(0,0,0,.05)}
h2{color:#c64f86}
label{display:block;margin-top:10px}
input,button{padding:8px;width:100%;margin-top:4px}
button{background:#f8c8dc;border:none;border-radius:8px;margin-top:12px;cursor:pointer}
#contrato{background:linear-gradient(135deg,#ffe6f0,#fff8dc,#e8f7ff);padding:40px;border-radius:20px}
.watermark{opacity:.08;position:absolute;font-size:120px}
</style>
</head>
<body>

<section>
<h2>üë§ Cadastro de Cliente</h2>
<label>Nome</label><input id="cNome">
<label>CPF</label><input id="cCpf">
<label>Telefone</label><input id="cTel">
<label>Endere√ßo</label><input id="cEnd">
<button onclick="salvarCliente()">Salvar Cliente</button>
</section>

<section>
<h2>üì¶ Estoque</h2>
<label>Item</label><input id="eItem">
<label>Quantidade</label><input type="number" id="eQtd">
<button onclick="salvarEstoque()">Adicionar</button>
<div id="listaEstoque"></div>
</section>

<section>
<h2>üßæ Contrato</h2>
<label>Valor do Contrato</label><input type="number" id="valorContrato">
<label>Sinal</label><input type="number" id="sinal">
<button onclick="gerarContrato()">Gerar Contrato</button>
</section>

<section id="contrato" style="display:none">
<h2 style="text-align:center">CONTRATO DE LOCA√á√ÉO ‚Äì PEGUE E MONTE</h2>
<p><strong>Empresa:</strong> Molleiros Decor</p>
<p><strong>Cliente:</strong> <span id="pCliente"></span></p>
<p><strong>Endere√ßo:</strong> <span id="pEnd"></span></p>
<p><strong>Valor:</strong> R$ <span id="pValor"></span></p>
<p><strong>Sinal:</strong> R$ <span id="pSinal"></span></p>
<h3>Cl√°usula de Cancelamento</h3>
<p>Em caso de cancelamento com menos de 7 dias do evento, o sinal n√£o ser√° devolvido.</p>
<p><strong>Assinatura Digital:</strong> __________________________</p>
<button onclick="window.print()">üñ®Ô∏è Imprimir / PDF</button>
</section>

<script>
const supabase = supabaseJs.createClient(
  'https://dpwtogyfwxoibtrrquax.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwd3RvZ3lmd3hvaWJ0cnJxdWF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4MzMyOTUsImV4cCI6MjA4MzQwOTI5NX0.VkDX_uXY2qPFtnEqLFULjRUrN4dACJE86AcawIXZ-44'
);

let clienteAtual={};

async function salvarCliente(){
 clienteAtual={nome:cNome.value,cpf:cCpf.value,tel:cTel.value,end:cEnd.value};
 await supabase.from('clientes').insert(clienteAtual);
 alert('Cliente salvo');
}

async function salvarEstoque(){
 await supabase.from('estoque').insert({item:eItem.value,qtd:eQtd.value});
 listarEstoque();
}

async function listarEstoque(){
 const {data}=await supabase.from('estoque').select('*');
 listaEstoque.innerHTML=data.map(i=>`${i.item} (${i.qtd})`).join('<br>');
}
listarEstoque();

function gerarContrato(){
 pCliente.innerText=clienteAtual.nome;
 pEnd.innerText=clienteAtual.end;
 pValor.innerText=valorContrato.value;
 pSinal.innerText=sinal.value;
 contrato.style.display='block';
}
</script>
</body>
</html>
